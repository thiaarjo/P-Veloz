{% extends 'veloizapp/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Meus Projetos{% endblock %}

{% block content %}
<div class="container-modern">
    <div class="section-header">
        <h1 class="section-title">Meus Projetos</h1>
        <p class="section-subtitle">Gerencie seus projetos</p>
    </div>

    <div class="card-modern">
        <h2 class="mb-4" style="color: var(--black); border-left: 4px solid var(--green-primary); padding-left: 1rem;">
            Adicionar Projeto
        </h2>
        <form method="post">
            {% csrf_token %}
            {{ form|crispy }}
            <button type="submit" class="btn-modern btn-primary mt-3">
                Adicionar Projeto
            </button>
        </form>
    </div>

    <div class="tasks-section">
        <h2 class="mb-4" style="color: var(--black); border-left: 4px solid var(--green-primary); padding-left: 1rem;">
            Lista de Projetos
            <span class="badge" style="background: var(--green-primary);">
                {{ projetos|length }}
            </span>
        </h2>

        {% if projetos %}
        <div class="tasks-grid">
            {% for projeto in projetos %}
            <div class="task-card">
                <div class="task-header">
                    <h3 class="task-title">{{ projeto.nome }}</h3>
                    <span class="badge" style="background: #3498db;">
                        {{ projeto.get_tipo_display }}
                    </span>
                </div>
                
                <div class="task-meta">
                    <p>{{ projeto.descricao|default:"Sem descrição" }}</p>
                    <small>Tarefas: {{ projeto.tarefas.count }}</small>
                </div>

                <div class="task-actions">
                    <a href="{% url 'detalhes_projeto' projeto.id %}" class="btn-modern btn-primary">
                        Ver Detalhes
                    </a>
                    <a href="{% url 'editar_projeto' projeto.id %}" class="btn-modern" style="background: #3498db; color: white;">
                        Editar
                    </a>
                    <a href="{% url 'excluir_projeto' projeto.id %}" class="btn-modern btn-danger">
                        Excluir
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <h3>Nenhum projeto criado</h3>
            <p>Crie seu primeiro projeto usando o formulário acima.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}